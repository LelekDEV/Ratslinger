[gd_scene format=4 uid="uid://gliuja466pg6"]

[ext_resource type="Texture2D" uid="uid://8qakvdh1gbpa" path="res://graphics/environment/sand_tile.png" id="1_ncd4d"]
[ext_resource type="Script" uid="uid://h08581xbp5g1" path="res://scripts/game.gd" id="1_o8yes"]
[ext_resource type="PackedScene" uid="uid://gyh7j0jqrav6" path="res://scenes/player.tscn" id="1_rf1xt"]
[ext_resource type="PackedScene" uid="uid://bpxoyc0unsk8n" path="res://scenes/rathouse_interior.tscn" id="2_1egfj"]
[ext_resource type="PackedScene" uid="uid://lw0lbb371my5" path="res://scenes/crosshair.tscn" id="2_7dpn4"]
[ext_resource type="PackedScene" uid="uid://cbkx546wmeje8" path="res://scenes/shop_layer.tscn" id="2_836xp"]
[ext_resource type="PackedScene" uid="uid://c2n2sjjatxuwj" path="res://scenes/title_layer.tscn" id="2_dybux"]
[ext_resource type="Script" uid="uid://cvi745bdmkf4h" path="res://scripts/ui.gd" id="2_ijxjl"]
[ext_resource type="Script" uid="uid://bafvyxexlje1q" path="res://scripts/weather_layer.gd" id="3_4qk7b"]
[ext_resource type="PackedScene" uid="uid://djd1q01nwytri" path="res://scenes/ui_heart.tscn" id="4_55u7g"]
[ext_resource type="FontFile" uid="uid://sgwyci3gbawn" path="res://fonts/fffforward.ttf" id="4_836xp"]
[ext_resource type="Script" uid="uid://do3ehr4w1u0d6" path="res://scripts/camera.gd" id="4_bq78c"]
[ext_resource type="Texture2D" uid="uid://drekyvwt4e2on" path="res://graphics/ui/location_popup.png" id="4_xw82j"]
[ext_resource type="Texture2D" uid="uid://c0ub0hdeeqktf" path="res://graphics/misc/coin.png" id="6_02ogl"]
[ext_resource type="Script" uid="uid://dhjd8qg5fcogs" path="res://scripts/ui_label.gd" id="6_f0ccc"]
[ext_resource type="PackedScene" uid="uid://2on6pkejauvo" path="res://scenes/accuracy_bar.tscn" id="6_s3lrj"]
[ext_resource type="PackedScene" uid="uid://dga30tbdq47t5" path="res://scenes/bullet_bar.tscn" id="7_b3wgx"]
[ext_resource type="Texture2D" uid="uid://bykgmcn3ihdkj" path="res://graphics/environment/crossmark.png" id="8_sh5j3"]
[ext_resource type="PackedScene" uid="uid://dd62w7380cncx" path="res://scenes/building.tscn" id="9_l77qo"]
[ext_resource type="Script" uid="uid://btwriu2gbmrm3" path="res://scripts/dialogue_strips.gd" id="9_wt5dx"]
[ext_resource type="PackedScene" uid="uid://cxmq3gxpsmp2o" path="res://scenes/gate.tscn" id="10_2mmsw"]
[ext_resource type="PackedScene" uid="uid://oow8c78pp03y" path="res://scenes/interaction_area.tscn" id="10_r3fff"]
[ext_resource type="Script" uid="uid://dlwbmyxuygwjb" path="res://scripts/coins_container.gd" id="11_fulw8"]
[ext_resource type="Script" uid="uid://cp448dgxo5kaw" path="res://scripts/animation_handler.gd" id="12_dawlq"]
[ext_resource type="Script" uid="uid://c3ngnqrj3wq4k" path="res://scripts/player_death_handler.gd" id="12_xw82j"]
[ext_resource type="PackedScene" uid="uid://cjqkgird8slts" path="res://scenes/particles/rain_particles.tscn" id="14_psga7"]
[ext_resource type="PackedScene" uid="uid://lno6nmuf2m2w" path="res://scenes/npc.tscn" id="18_a8jnx"]
[ext_resource type="Texture2D" uid="uid://c2axess4e6nxh" path="res://graphics/environment/buildings/tower.png" id="19_d8x6a"]
[ext_resource type="Texture2D" uid="uid://c3ota7nm4hf1b" path="res://graphics/environment/buildings/buildings.png" id="24_a3e4m"]
[ext_resource type="TileSet" uid="uid://cbnfobqiceman" path="res://data/environment_tileset.tres" id="26_4qk7b"]
[ext_resource type="Script" uid="uid://c43tbfovvl81u" path="res://scripts/rain_surface_tilemap.gd" id="28_dybux"]
[ext_resource type="Script" uid="uid://cmo05ufm0vqdm" path="res://scripts/markers.gd" id="29_1egfj"]

[sub_resource type="ViewportTexture" id="ViewportTexture_4qk7b"]
viewport_path = NodePath("Weather/SubViewport")

[sub_resource type="Theme" id="Theme_s3lrj"]
default_font = ExtResource("4_836xp")
default_font_size = 32

[sub_resource type="Animation" id="Animation_57iyq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ContainerContent:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 10)]
}

[sub_resource type="Animation" id="Animation_fulw8"]
resource_name = "slide_in"
length = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ContainerContent:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 10), Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_c2ull"]
resource_name = "slide_out"
length = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ContainerContent:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, 10)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_57iyq"]
_data = {
&"RESET": SubResource("Animation_57iyq"),
&"slide_in": SubResource("Animation_fulw8"),
&"slide_out": SubResource("Animation_c2ull")
}

[sub_resource type="Theme" id="Theme_a8jnx"]
default_font = ExtResource("4_836xp")
default_font_size = 32

[sub_resource type="Animation" id="Animation_l77qo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HitFlashRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Hearts:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("MarginContainer:self_modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_wt5dx"]
resource_name = "hide_ui"
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Hearts:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.75),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MarginContainer:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.75),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_2mmsw"]
resource_name = "player_hit"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HitFlashRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(0.1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.3), Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_d8x6a"]
resource_name = "show_ui"
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Hearts:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.75),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MarginContainer:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.75),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_836xp"]
_data = {
&"RESET": SubResource("Animation_l77qo"),
&"hide_ui": SubResource("Animation_wt5dx"),
&"player_hit": SubResource("Animation_2mmsw"),
&"show_ui": SubResource("Animation_d8x6a")
}

[sub_resource type="Animation" id="Animation_s3lrj"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MarginContainer/VBoxContainer/EnemiesLabel:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.9490196, 0.84705883, 0.5686275, 1)]
}

[sub_resource type="Animation" id="Animation_836xp"]
resource_name = "wave_end"
length = 0.5
step = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MarginContainer/VBoxContainer/EnemiesLabel:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.776471, 0.631373, 0.392157, 1), Color(0.95, 0.848667, 0.57, 1)]
}

[sub_resource type="Animation" id="Animation_r3fff"]
resource_name = "wave_start"
length = 0.2
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MarginContainer/VBoxContainer/EnemiesLabel:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.95, 0.848667, 0.57, 1), Color(0.776471, 0.631373, 0.392157, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_sh5j3"]
_data = {
&"RESET": SubResource("Animation_s3lrj"),
&"wave_end": SubResource("Animation_836xp"),
&"wave_start": SubResource("Animation_r3fff")
}

[sub_resource type="Animation" id="Animation_psga7"]
resource_name = "RESET"
length = 0.001
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../MarginContainer/VBoxContainer/MissionLabel:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.7764706, 0.6313726, 0.39215687, 1)]
}

[sub_resource type="Animation" id="Animation_f0ccc"]
resource_name = "mission_complete"
length = 0.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../MarginContainer/VBoxContainer/MissionLabel:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.7764706, 0.6313726, 0.39215687, 1), Color(0.9490196, 0.84705883, 0.5686275, 1)]
}

[sub_resource type="Animation" id="Animation_dawlq"]
resource_name = "mission_redeem"
length = 0.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../MarginContainer/VBoxContainer/MissionLabel:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.9490196, 0.84705883, 0.5686275, 1), Color(0.7764706, 0.6313726, 0.39215687, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_psga7"]
_data = {
&"RESET": SubResource("Animation_psga7"),
&"mission_complete": SubResource("Animation_f0ccc"),
&"mission_redeem": SubResource("Animation_dawlq")
}

[sub_resource type="Animation" id="Animation_a3e4m"]
resource_name = "RESET"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../DialogueStrips:width")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_dybux"]
resource_name = "hide_dialogue_strips"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../DialogueStrips:width")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(-2, -2),
"update": 0,
"values": [75.0, 0.0]
}

[sub_resource type="Animation" id="Animation_1egfj"]
resource_name = "show_dialogue_strips"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../DialogueStrips:width")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(-2, -2),
"update": 0,
"values": [0.0, 75.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_a3e4m"]
_data = {
&"RESET": SubResource("Animation_a3e4m"),
&"hide_dialogue_strips": SubResource("Animation_dybux"),
&"show_dialogue_strips": SubResource("Animation_1egfj")
}

[sub_resource type="Animation" id="Animation_p3ae7"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../PerfectFlashRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.3, 1, 0.3, 0)]
}

[sub_resource type="Animation" id="Animation_vjquk"]
resource_name = "accuracy_perfect"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../PerfectFlashRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(0.1, 1),
"update": 0,
"values": [Color(0.3, 1, 0.3, 0.11764706), Color(0.3, 1, 0.3, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_m1gv1"]
_data = {
&"RESET": SubResource("Animation_p3ae7"),
&"accuracy_perfect": SubResource("Animation_vjquk")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_r3fff"]
radius = 30.0

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_1egfj"]
load_path = "res://.godot/imported/buildings.png-16398df9d57469099cfeae2d72369085.ctex"

[sub_resource type="Curve" id="Curve_dawlq"]
_data = [Vector2(0, 1), 0.0, -2.2396998, 0, 0, Vector2(0.6, 0.1), 0.0, 0.0, 0, 0, Vector2(1, 0.5), 0.0, 0.0, 0, 0]
point_count = 3
metadata/_snap_enabled = true

[sub_resource type="CircleShape2D" id="CircleShape2D_fulw8"]
resource_local_to_scene = true
radius = 15.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_l77qo"]
distance = -234.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_836xp"]
normal = Vector2(0, 1)
distance = -234.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_s3lrj"]
normal = Vector2(-1, 0)
distance = -324.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jrnar"]
size = Vector2(26, 78)

[node name="Game" type="Node2D" unique_id=1244812287 groups=["game"]]
y_sort_enabled = true
script = ExtResource("1_o8yes")

[node name="InnerRathouse" parent="." unique_id=157548817 instance=ExtResource("2_1egfj")]
position = Vector2(-1200, 0)

[node name="TitleLayer" parent="." unique_id=1948925533 instance=ExtResource("2_dybux")]
visible = false

[node name="ShopLayer" parent="." unique_id=1318422254 instance=ExtResource("2_836xp")]
process_mode = 3
visible = false

[node name="Weather" type="CanvasLayer" parent="." unique_id=1359549158]
layer = 0
scale = Vector2(4, 4)
transform = Transform2D(4, 0, 0, 4, 0, 0)
script = ExtResource("3_4qk7b")

[node name="SubViewport" type="SubViewport" parent="Weather" unique_id=440391338]
transparent_bg = true
snap_2d_transforms_to_pixel = true
snap_2d_vertices_to_pixel = true
size = Vector2i(288, 162)

[node name="RainParticles" parent="Weather/SubViewport" unique_id=1825388257 instance=ExtResource("14_psga7")]
position = Vector2(0, -100)
emitting = false

[node name="TextureRect" type="TextureRect" parent="Weather" unique_id=1737692972]
offset_right = 40.0
offset_bottom = 40.0
texture = SubResource("ViewportTexture_4qk7b")

[node name="UI" type="CanvasLayer" parent="." unique_id=1372504453 groups=["ui"]]
layer = 0
script = ExtResource("2_ijxjl")

[node name="PerfectFlashRect" type="ColorRect" parent="UI" unique_id=1366706336]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.3, 1, 0.3, 0)
metadata/_edit_lock_ = true

[node name="HitFlashRect" type="ColorRect" parent="UI" unique_id=353919241]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(1, 1, 1, 0)
metadata/_edit_lock_ = true

[node name="Hearts" type="HBoxContainer" parent="UI" unique_id=255009402]
offset_left = -144.0
offset_top = -81.0
offset_right = 56.0
offset_bottom = -31.0
theme_override_constants/separation = 50

[node name="UIHeart1" parent="UI/Hearts" unique_id=1885165400 instance=ExtResource("4_55u7g")]
layout_mode = 2

[node name="UIHeart2" parent="UI/Hearts" unique_id=1180109079 instance=ExtResource("4_55u7g")]
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="UI" unique_id=1574277206]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16
metadata/_edit_lock_ = true

[node name="VBoxContainer" type="VBoxContainer" parent="UI/MarginContainer" unique_id=1664629954]
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8

[node name="EnemiesLabel" type="Label" parent="UI/MarginContainer/VBoxContainer" unique_id=1735487136]
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
theme = SubResource("Theme_s3lrj")
theme_override_colors/font_color = Color(0.9490196, 0.84705883, 0.5686275, 1)
text = "Wave cleared"
visible_characters_behavior = 4
script = ExtResource("6_f0ccc")

[node name="MissionLabel" type="Label" parent="UI/MarginContainer/VBoxContainer" unique_id=178067893]
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
theme = SubResource("Theme_s3lrj")
theme_override_colors/font_color = Color(0.7764706, 0.6313726, 0.39215687, 1)
text = "No mission active"
visible_characters_behavior = 4
script = ExtResource("6_f0ccc")
rect_offset = Vector2(0, -48)

[node name="CoinsContainer" type="Control" parent="UI/MarginContainer" unique_id=388680449]
custom_minimum_size = Vector2(60, 50)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 8
script = ExtResource("11_fulw8")

[node name="Timer" type="Timer" parent="UI/MarginContainer/CoinsContainer" unique_id=415128966]
wait_time = 2.0
one_shot = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="UI/MarginContainer/CoinsContainer" unique_id=1235271342]
libraries/ = SubResource("AnimationLibrary_57iyq")

[node name="ContainerContent" type="Control" parent="UI/MarginContainer/CoinsContainer" unique_id=1255379328]
anchors_preset = 0
offset_top = 10.0
offset_right = 40.0
offset_bottom = 50.0

[node name="CoinSprite" type="Sprite2D" parent="UI/MarginContainer/CoinsContainer/ContainerContent" unique_id=1931979703]
position = Vector2(36, 16)
scale = Vector2(8, 8)
texture = ExtResource("6_02ogl")
region_enabled = true
region_rect = Rect2(0, 0, 8, 8)

[node name="CoinLabel" type="Label" parent="UI/MarginContainer/CoinsContainer/ContainerContent" unique_id=154091310]
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = 44.0
offset_top = -17.0
offset_right = 634.0
offset_bottom = 27.0
grow_horizontal = 0
grow_vertical = 2
theme = SubResource("Theme_a8jnx")
theme_override_colors/font_color = Color(0.73319995, 0.76596, 0.78, 1)
text = "0"

[node name="AccuracyBar" parent="UI" unique_id=1989509615 instance=ExtResource("6_s3lrj")]
position = Vector2(0, -24)

[node name="BulletBar" parent="UI" unique_id=178394332 instance=ExtResource("7_b3wgx")]
position = Vector2(-86, 41)

[node name="DialogueStrips" type="Node2D" parent="UI" unique_id=263507374]
script = ExtResource("9_wt5dx")

[node name="LocationPopup" type="Sprite2D" parent="UI" unique_id=1393942738]
texture = ExtResource("4_xw82j")
hframes = 2

[node name="Crosshair" parent="UI" unique_id=148041615 instance=ExtResource("2_7dpn4")]
metadata/_edit_lock_ = true

[node name="AnimationHandler" type="Node" parent="UI" unique_id=1523482957]
script = ExtResource("12_dawlq")

[node name="Player1" type="AnimationPlayer" parent="UI/AnimationHandler" unique_id=728152371]
root_node = NodePath("../..")
libraries/ = SubResource("AnimationLibrary_836xp")

[node name="Player2" type="AnimationPlayer" parent="UI/AnimationHandler" unique_id=1223452245]
root_node = NodePath("../..")
libraries/ = SubResource("AnimationLibrary_sh5j3")

[node name="Player3" type="AnimationPlayer" parent="UI/AnimationHandler" unique_id=599942333]
libraries/ = SubResource("AnimationLibrary_psga7")

[node name="Player4" type="AnimationPlayer" parent="UI/AnimationHandler" unique_id=725324840]
libraries/ = SubResource("AnimationLibrary_a3e4m")

[node name="Player5" type="AnimationPlayer" parent="UI/AnimationHandler" unique_id=1211310604]
libraries/ = SubResource("AnimationLibrary_m1gv1")

[node name="SandSprite1" type="Sprite2D" parent="." unique_id=577903870]
z_index = -2
texture_repeat = 2
texture = ExtResource("1_ncd4d")
region_enabled = true
region_rect = Rect2(0, 0, 648, 468)
metadata/_edit_lock_ = true

[node name="SandSprite2" type="Sprite2D" parent="." unique_id=785497505]
z_index = -2
texture_repeat = 2
position = Vector2(-648, 0)
texture = ExtResource("1_ncd4d")
region_enabled = true
region_rect = Rect2(0, 0, 648, 468)
metadata/_edit_lock_ = true

[node name="SandSprite3" type="Sprite2D" parent="." unique_id=371962306]
z_index = -2
texture_repeat = 2
position = Vector2(0, 468)
texture = ExtResource("1_ncd4d")
region_enabled = true
region_rect = Rect2(0, 0, 648, 468)
metadata/_edit_lock_ = true

[node name="CrossmarkSprite" type="Sprite2D" parent="." unique_id=531476546]
z_index = -2
texture = ExtResource("8_sh5j3")

[node name="WaveStartInteractionArea" parent="." unique_id=902325514 instance=ExtResource("10_r3fff")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="WaveStartInteractionArea" unique_id=1572488804]
shape = SubResource("CircleShape2D_r3fff")

[node name="Player" parent="." unique_id=1960160699 node_paths=PackedStringArray("gate") groups=["player"] instance=ExtResource("1_rf1xt")]
gate = NodePath("../Environment/Gate")
metadata/_edit_lock_ = true

[node name="Camera2D" type="Camera2D" parent="Player" unique_id=151954985 node_paths=PackedStringArray("gate") groups=["camera"]]
process_mode = 3
zoom = Vector2(4, 4)
process_callback = 0
limit_top = -234
limit_right = 324
limit_bottom = 234
position_smoothing_enabled = true
script = ExtResource("4_bq78c")
gate = NodePath("../../Environment/Gate")

[node name="Enemies" type="Node2D" parent="." unique_id=1167283035 groups=["enemies"]]
y_sort_enabled = true

[node name="Projectiles" type="Node2D" parent="." unique_id=1412819979 groups=["projectiles"]]
y_sort_enabled = true

[node name="Bullets" type="Node2D" parent="." unique_id=1731328154 groups=["bullets"]]
y_sort_enabled = true

[node name="Coins" type="Node2D" parent="." unique_id=1787759229 groups=["coins"]]
z_index = 1
y_sort_enabled = true

[node name="Environment" type="Node2D" parent="." unique_id=268704630]
y_sort_enabled = true

[node name="Shop" parent="Environment" unique_id=2105327580 instance=ExtResource("9_l77qo")]
position = Vector2(-452, -95)
texture = ExtResource("24_a3e4m")

[node name="Rathaus" parent="Environment" unique_id=1779372816 instance=ExtResource("9_l77qo")]
position = Vector2(-584, -96)
texture = SubResource("CompressedTexture2D_1egfj")
id = 1

[node name="Gate" parent="Environment" unique_id=1886308699 instance=ExtResource("10_2mmsw")]
position = Vector2(-298, 0)

[node name="RiverRect1" type="ColorRect" parent="Environment" unique_id=1650193637]
offset_left = -694.0
offset_top = -234.0
offset_right = -660.0
offset_bottom = 234.0
color = Color(0.2016, 0.44751993, 0.48, 1)

[node name="RiverRect2" type="ColorRect" parent="Environment" unique_id=1883370981]
offset_left = -693.0
offset_top = -234.0
offset_right = -661.0
offset_bottom = 234.0
color = Color(0.29899997, 0.63245, 0.65, 1)

[node name="TowerSprite1" type="Sprite2D" parent="Environment" unique_id=946271222]
position = Vector2(-667, -47)
texture = ExtResource("19_d8x6a")

[node name="TowerSprite2" type="Sprite2D" parent="Environment" unique_id=1756406117]
position = Vector2(-671, 32)
texture = ExtResource("19_d8x6a")

[node name="TileMapLayer" type="TileMapLayer" parent="Environment" unique_id=1513322276 node_paths=PackedStringArray("spawn_node")]
tile_map_data = PackedByteArray("AADL/8v/AQAAAAAAAADb/83/AQACAAAAAADk/83/AQACAAMAAADu/8z/AQAAAAAAAAD6/87/AQADAAMAAAACAMv/AQAAAAMAAAAIAM7/AQABAAMAAAASAMz/AQACAAAAAAAfAMv/AQAEAAAAAAApAM7/AQACAAMAAAAyAMz/AQACAAMAAAA7AM3/AQAAAAAAAABGAMz/AQACAAAAAABLANj/AQAAAAAAAABHAOP/AQADAAMAAABLAOr/AQABAAMAAABHAO3/AQAAAAMAAABLAPL/AQACAAMAAABHAPn/AQAAAAAAAABMAAMAAQAEAAAAAABIAA8AAQACAAAAAABMABgAAQACAAMAAABIAB4AAQADAAMAAABLACgAAQACAAAAAABFADMAAQAAAAAAAAA6ADEAAQADAAMAAAA0ADIAAQAAAAAAAAAsADEAAQAAAAMAAAAmADQAAQAAAAMAAAAeADEAAQACAAMAAAAVADMAAQACAAAAAAALADMAAQADAAMAAAACADAAAQACAAMAAAAAADYAAQABAAMAAAD3/zMAAQAEAAAAAADu/zIAAQAAAAAAAADg/zMAAQACAAAAAADW/zIAAQACAAMAAADO/zYAAQADAAMAAADJ/zAAAQACAAMAAADF/zUAAQABAAMAAADA/zQAAQAAAAMAAAC4/zIAAQACAAAAAACy/yUAAQAAAAAAAADD/8n/AQADAAMAAAC7/87/AQADAAMAAACz/9X/AQACAAAAAAC2/9v/AAAAAAAAAAC2/+P/AAAAAAAAAAC2/+v/AAAAAAAAAAC2//P/AAAAAAAAAAC2/w4AAAAAAAAAAAC2/xYAAAAAAAAAAAC2/x4AAAAAAAAAAAC2/yYAAAAAAAAAAACt/+v/AAABAAAAAACf/+v/AAABAAAAAAB+/+v/AAABAAAAAACt/xYAAAABAAAAAACf/xYAAAABAAAAAACR/xYAAAABAAAAAACD/xYAAAABAAAAAAB1/xYAAAABAAAAAABn/xYAAAABAAAAAABi/+v/AAAAAAAAAABe/xYAAAAAAAAAAABe/+v/AAAAAAAAAAA=")
tile_set = ExtResource("26_4qk7b")
script = ExtResource("28_dybux")
spawn_node = NodePath("../../FX")

[node name="FX" type="Node2D" parent="." unique_id=52843161 groups=["fx"]]

[node name="NPC" type="Node2D" parent="." unique_id=1592318965]
y_sort_enabled = true

[node name="KiddoNPC" parent="NPC" unique_id=1471927015 instance=ExtResource("18_a8jnx")]
position = Vector2(-450, 50)
id = 0

[node name="MayorNPC" parent="NPC" unique_id=1886138594 instance=ExtResource("18_a8jnx")]
position = Vector2(-584, 15)
reward_coins_curve = SubResource("Curve_dawlq")

[node name="AnimatedSprite2D" parent="NPC/MayorNPC" index="0" unique_id=1148445637]
animation = &"mayor"
frame_progress = 0.5244731
override_anim = "mayor"

[node name="CollisionShape2D" parent="NPC/MayorNPC" index="2" unique_id=913838682]
shape = SubResource("CircleShape2D_fulw8")

[node name="Markers" type="Node2D" parent="." unique_id=1888461289 groups=["markers"]]
script = ExtResource("29_1egfj")

[node name="RatHouseSpawnPos" type="Marker2D" parent="Markers" unique_id=887362339]
position = Vector2(-1200, 59)

[node name="RatHouseExitPos" type="Marker2D" parent="Markers" unique_id=257440908]
position = Vector2(-584, -68)

[node name="RatHouseCamPos" type="Marker2D" parent="Markers" unique_id=381274108]
position = Vector2(-1200, 0)

[node name="WorldBounds" type="StaticBody2D" parent="." unique_id=1827856613]
collision_layer = 2
collision_mask = 2

[node name="BottomShape" type="CollisionShape2D" parent="WorldBounds" unique_id=1153301312]
shape = SubResource("WorldBoundaryShape2D_l77qo")

[node name="TopShape" type="CollisionShape2D" parent="WorldBounds" unique_id=262434055]
shape = SubResource("WorldBoundaryShape2D_836xp")

[node name="RightShape" type="CollisionShape2D" parent="WorldBounds" unique_id=532631891]
shape = SubResource("WorldBoundaryShape2D_s3lrj")

[node name="CollisionShape1" type="CollisionShape2D" parent="WorldBounds" unique_id=1499526189]
position = Vector2(-660, -48)
shape = SubResource("RectangleShape2D_jrnar")

[node name="CollisionShape2" type="CollisionShape2D" parent="WorldBounds" unique_id=2066139006]
position = Vector2(-664, 31)
shape = SubResource("RectangleShape2D_jrnar")

[node name="CoinBoundRect" type="ReferenceRect" parent="." unique_id=1017912923 groups=["coin_bound_rect"]]
offset_left = -270.0
offset_top = -180.0
offset_right = 270.0
offset_bottom = 180.0
metadata/_edit_lock_ = true

[node name="PlayerDeathHandler" type="Node2D" parent="." unique_id=1706911077 node_paths=PackedStringArray("camera", "death_shadow_rect", "ui", "weather_layer")]
process_mode = 3
z_index = 10
script = ExtResource("12_xw82j")
camera = NodePath("../Player/Camera2D")
death_shadow_rect = NodePath("../DeathShadowRect")
ui = NodePath("../UI")
weather_layer = NodePath("../Weather")

[node name="DeathShadowRect" type="ColorRect" parent="." unique_id=1755472873]
visible = false
z_index = 10
offset_left = -972.0
offset_top = -234.0
offset_right = 324.0
offset_bottom = 234.0
color = Color(0, 0, 0, 1)

[node name="EnemySpawnTimer" type="Timer" parent="." unique_id=737762801]
wait_time = 8.0

[connection signal="timeout" from="EnemySpawnTimer" to="." method="_on_enemy_spawn_timer_timeout"]

[editable path="NPC/MayorNPC"]
